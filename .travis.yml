jobs:
  include:
    - stage: web-test
      language: node_js
      node_js:
        - "12"
      cache:
        yarn: true
      before_script: |
        npm i -g yarn
      script: |
        yarn test
    - stage: api-test
      language: java
      jdk:
        - openjdk8
      before_cache:
        - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
        - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
      cache:
        directories:
          - $HOME/.gradle/caches/
          - $HOME/.gradle/wrapper/
      script: |
        ./gradlew test